!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((n="undefined"!=typeof globalThis?globalThis:n||self).i18nextSubliminal={})}(this,(function(n){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(n)}function t(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t);if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}function r(n,e,r){return(e=t(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}var o="undefined"!=typeof window?["‌","‍"]:["​","‌"],i=RegExp("([".concat(o.join(""),"]{9})+"),"gu"),u=function(n){var e=function(n){return Array.from((new TextEncoder).encode(n))}(n).map(Number),t=e.map((function(n){return function(n){var e=8-n.length;return"0".repeat(e)+n}(n.toString(2))+"0"})).join("");return Array.from(t).map((function(n){return o[Number(n)]})).join("")},s=u("subliminal:start"),a=function(n){var e,t=Array.from(n).map((function(n){return o.indexOf(n)})).map(String).join("").match(/(.{9})/g),r=Uint8Array.from((null==t?void 0:t.map((function(n){return parseInt(n.slice(0,8),2)})))||[]);return e=r,(new TextDecoder).decode(new Uint8Array(e))};function l(n){var e=function(n){if(0===Object.keys(n).length)return n;var e={k:n.key,n:n.ns,l:n.lng,s:n.source};return JSON.stringify(e)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t=u(e);return"string"==typeof n&&n?s+n+t:n}function c(n){var e=function(n){var e,t=null===(e=n.match(i))||void 0===e?void 0:e.filter((function(n){return n.length>8}));if(t&&0!==t.length)return a(t[t.length-1])}(n),t=function(n){if(n&&"string"==typeof n&&0===n.indexOf("{"))try{var e=JSON.parse(n||"{}");return{key:e.k,ns:e.n,lng:e.l,source:e.s}}catch(n){return}}(e),r=function(n){return n.replace(i,"")}(n);return{text:r,invisibleMeta:t}}function f(n){if(!n||n.length<27)return!1;if(!i.test(n))return!1;var e=n.substring(n.length-9);return"}"===a(e)}function p(n){return n.startsWith(s)}function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function y(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach((function(e){r(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var v="subliminal",b={name:v,type:"postProcessor",options:{},setOptions:function(n){this.options=y(y({},n),this.options)},process:function(n,e,t,r){var o,i,u,s,a=this.options=y(y({},t),this.options);if(t.i18nResolved)o=t.i18nResolved.exactUsedKey,i=t.i18nResolved.usedNS,u=t.i18nResolved.usedLng,s=void 0===t.i18nResolved.res?o!==n?"default":"key":"translation";else{var c,f,p,d,v,b,m=null!==(c=null!==(f=a.keySeparator)&&void 0!==f?f:null==r||null===(p=r.options)||void 0===p?void 0:p.keySeparator)&&void 0!==c?c:".",g=r.extractFromKey(e.join(m),t),O=g.key,h=g.namespaces;o=O,i=null!==(d=null!==(v=null==h?void 0:h[0])&&void 0!==v?v:a.ns)&&void 0!==d?d:null==r||null===(b=r.options)||void 0===b?void 0:b.defaultNS,u=t.lng||this.language,s=o===n?"key":"translation"}return l(n,{key:o,ns:i,lng:u,source:s})},overloadTranslationOptionHandler:function(){return{postProcess:v,postProcessPassResolved:!0}}},m={wrap:l,unwrap:c,containsHiddenMeta:f,containsHiddenStartMarker:p,PostProcessor:b,plugin:b};n.PostProcessor=b,n.containsHiddenMeta=f,n.containsHiddenStartMarker=p,n.default=m,n.plugin=b,n.unwrap=c,n.wrap=l,Object.defineProperty(n,"__esModule",{value:!0})}));
