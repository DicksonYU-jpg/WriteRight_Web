'use strict';

var postMessage = require('./postMessage.js');
var handleEditKey = require('./handleEditKey.js');

function handler(payload) {
  var meta = payload.meta,
    value = payload.value,
    lng = payload.lng;
  if (meta && value !== undefined) {
    handleEditKey.setValueOnNode(meta, value);
    var usedLng = lng || postMessage.api.i18n.getLng();
    postMessage.api.i18n.setResource(usedLng, meta.ns, meta.key, value);
    postMessage.api.i18n.triggerRerender();
  }
}
postMessage.api.addHandler('commitKey', handler);
